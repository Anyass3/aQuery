"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Aq=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.query,d=void 0===c?"":c,e=b.parent,f=void 0===e?document:e,g=b.el,h=void 0===g?"":g,i=b.num,j=void 0===i?1:i;if(_classCallCheck(this,a),this.query=d,a.is_html(f)||(f=document),!!d){var k,l=a.clean(this.query,!0),m=_slicedToArray(l,2),n=m[0],o=m[1];o?(k=function(a){return f.querySelectorAll(a)},this.many=!0):k=function(a){return f.querySelector(a)},a.is_array(n)?(this.$$=n.reduce(function(a,b){return o?[].concat(_toConsumableArray(a),_toConsumableArray(k(b))):[].concat(_toConsumableArray(a),[k(b)])},[]),this.many=!0):this.$$=k(n)}else(1<j||a.is_array(h))&&(this.many=!0),this.$$=a.is_html(h)?h:1<j?_toConsumableArray(Array(j).keys()).reduce(function(a){return[].concat(_toConsumableArray(a),[document.createElement(h)])},[]):document.createElement(h);this.arr=Array.from(this.many?this.$$:[this.$$])}return _createClass(a,[{key:"show",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.cls,d=void 0===c?"":c,e=b.animate,f=void 0===e?"abquery-show":e,g=b.delay,h=void 0===g?600:g,i=b.keep,j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return d?this.addClass(d):this.rmClass("abquery-d-none, d-none").rmCss("display"),this.addClass(f),setTimeout(function(){void 0!==i&&i||a.rmClass(f)},h),j(),this}},{key:"hide",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.cls,d=void 0===c?"":c,e=b.animate,f=void 0===e?"abquery-hide":e,g=b.delay,h=void 0===g?600:g,i=b.keep,j=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return this.addClass(f),setTimeout(function(){d?a.rmClass(d):a.addClass("abquery-d-none"),void 0!==i&&i||a.rmClass(f)},h),j(),this}},{key:"toggleDisplay",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.cls,d=void 0===c?"":c;return this.run(function(b){$el(b).hasClass(d?d:["abquery-d-none","d-none"],{someClass:!0})?a.show({cls:d}):a.hide({cls:d})})}},{key:"addClass",value:function(a){return this.$run(function(a,b){!b.trim()||a.classList.add(b)},a)}},{key:"hasClass",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.someClass,d=b.someEl;return this.$runBool(function(a,b){return a.classList.contains(b)},a,{someArr:void 0!==c&&c,someEl:void 0!==d&&d})}},{key:"rmClass",value:function(a){return this.$run(function(a,b){!b.trim()||a.classList.remove(b)},a)}},{key:"toggleClass",value:function(a){return this.$run(function(a,b){a.classList.toggle(b)},a)}},{key:"on",value:function(a,b){return this.$run(function(a,c){a.addEventListener(c,b)},a)}},{key:"css",value:function(b,c){var d=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],f=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"!";return[a.split(b)[0].trim(),d?d:!!a.split(b)[1]]};return this.$set(function(c,d,e){if(a.is_array(a.clean(b))||void 0===e)return c.style.getPropertyValue(d);var g=f(e),h=_slicedToArray(g,2),i=h[0],j=h[1];c.style.setProperty(d,i,j?"important":"")},b,c)}},{key:"rmCss",value:function(a){return this.$run(function(a,b){a.style.removeProperty(b)},a)}},{key:"attr",value:function(b,c){return this.$set(function(c,d,e){return a.is_array(a.clean(b))||void 0===e?c.getAttribute(d):void c.setAttribute(d,e)},b,c)}},{key:"rmAttr",value:function(a){return this.$run(function(a,b){a.removeAttribute(b)},a)}},{key:"appendParent",value:function(a){return this.$run(function(a,b){b.appendChild(a)},a)}},{key:"detachParent",value:function(){return this.run(function(a){a.parentNode.removeChild(a)})}},{key:"append",value:function(a){return this.$run(function(a,b){a.appendChild(b)},a)}},{key:"detach",value:function(a){return this.$run(function(a,b){a.removeChild(b)},a)}},{key:"run",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=b.delay,d=void 0===c?0:c,e=b.every,f=void 0===e?0:e,g=this.arr;return f?setInterval(function(){return g.forEach(a)},f):d?setTimeout(function(){return g.forEach(a)},d):g.forEach(a),this}},{key:"$run",value:function(b,c){var d=this;return c=a.clean(c),a.is_array(c)||(c=[c]),c.forEach(function(a){return d.run(function(c){return b(c,a)})}),this}},{key:"$runBool",value:function(b,c){var d=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},f=e.someArr,g=e.someEl;a.is_array(c)||(c=[c]);var h=function(a){return void 0!==g&&g?d.arr.some(function(c){return b(c,a)}):d.arr.every(function(c){return b(c,a)})};return void 0!==f&&f?c.some(h):c.every(h)}},{key:"$set",value:function(b,c,d){var f=[];c=a.clean(c);var g="string"==typeof c;return this.run(function(h){if(a.is_dict(c))for(var e in c)b(h,e,c[e]);else a.is_array(c)||void 0===d?(g&&(c=[c]),f=[].concat(_toConsumableArray(f),_toConsumableArray(c.reduce(function(a,c){return[].concat(_toConsumableArray(a),[b(h,c)])},[])))):b(h,c,d)}),(a.is_array(c)||g)&&void 0===d?1===this.arr.length&&g?f[0]:f:this}},{key:"prop",value:function(b,c){return this.$set(function(c,d,e){if(a.is_array(a.clean(b))||void 0===e)return c[d];try{c[d]=e}catch(a){console.error(a)}},b,c)}},{key:"$",value:function(a){var b=this.arr.reduce(function(b,c){return[].concat(_toConsumableArray(b),_toConsumableArray(_$(a,c).arr))},[]);return 1===b.length?$el(b[0]):$el(b)}},{key:"$new",value:function(a,b){var c=_$new(a,b);return this.append(c.$$),c}},{key:"class",get:function(){return this.prop("className")},set:function(a){this.prop("className",a)}},{key:"parent",get:function(){return $el(this.arr[0].parentNode)}},{key:"parents",get:function(){var a=Array.from(this.arr.reduce(function(a,b){return a.add(b.parentNode)},new Set));return $el(a)}},{key:"child",get:function(){return $el(this.arr[0].childNodes[0])}},{key:"children",get:function(){var a=[];return this.run(function(b){a=[].concat(_toConsumableArray(a),_toConsumableArray(Array.from(b.childNodes)))}),$el(a)}},{key:"html",get:function(){return this.prop("innerHTML")},set:function(a){this.prop("innerHTML",a)}},{key:"text",get:function(){return this.prop("textContent")},set:function(a){this.prop("textContent",a)}},{key:"val",get:function(){var b=a.form_data(this.$$),c=Object.keys(b);return 1===c.length?b[c[0]]:b},set:function(b){this.run(function(c){var d=a.form_value(c,!0);c[d]=b})}}],[{key:"is_array",value:function(a){return[].__proto__===a.__proto__||NodeList===a.__proto__.constructor}},{key:"is_html",value:function b(c){var d=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],b=function(a){return a.__proto__.constructor.toString().includes("HTML")};return d?(a.is_array(c)||(c=[c]),b(c[0])):b(c)}},{key:"is_dict",value:function(a){return{}.__proto__===a.__proto__}},{key:"obj_text",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";for(var c in a)b+="".concat(c,": ").concat(a[c],"; ").trim();return b}},{key:"clean",value:function(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if("string"!=typeof a)return a;var c=!1;return"*"===a[0]&&(a=a.slice(1),c=!0),a=a.split(",").reduce(function(a,b){return[].concat(_toConsumableArray(a),[b.trim()])},[]),a=1===a.length?a[0]:a,b?[a,c]:a}},{key:"form_data",value:function(b){return a.is_array(b)||(b=[b]),b.reduce(function(b,c){var d=a.form_value(c);return null===d||"submit"===c.type?b:Object.assign({},b,_defineProperty({},c.name||c.id,d))},{})}},{key:"form_value",value:function(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return"INPUT"===a.tagName||"TEXTAREA"===a.tagName?["radio","checkbox"].includes(a.type)?b?"checked":a.checked:"file"===a.type?!0===a.multiple?b?"files":a.files:b?"files[0]":a.files[0]:b?"value":a.value:"SELECT"===a.tagName?b?"select.option.selected":Array.from(a.options).filter(function(a){return a.selected}).map(function(a){return a.value}):null}},{key:"css_prefix",value:function(a){return["","-webkit-","-moz-"].reduce(function(b,c){return b+="".concat(c).concat(a.trim(),";")},"")}},{key:"init_style_defaults",value:function(){if(!_$("abquery-init_style_defaults").$$){var b="".concat(a.css_prefix("animation: abquery-keyframe-show .6s cubic-bezier(0, 0.9, 0.3, 1.2) forwards"),"\n        opacity: 0;").concat(a.css_prefix("transform: translateY(-4rem) scale(.8)")),c="0% {".concat(a.css_prefix("transform: scale(1)"),"opacity: 1;}\n        20%{").concat(a.css_prefix("transform: scale(.9)"),"} 100% {").concat(a.css_prefix("transform: none"),"opacity: 0;}");return a.add_keyframes("abquery-keyframe-show","100%{opacity: 1;".concat(a.css_prefix("transform: none"),"}")),a.add_style(".abquery-show",b),a.add_keyframes("abquery-keyframe-hide",c),a.add_style(".abquery-hide","".concat(a.css_prefix("animation: abquery-keyframe-hide .6s ease-out"))),a.add_style(".abquery-d-none","display:none !important").attr("abquery-init_style_defaults",!0)}}},{key:"gen_frames",value:function(a,b){return"\n        @keyframes ".concat(a," {").concat(b,"}\n        @-webkit-keyframes ").concat(a," {").concat(b,"}\n        ")}},{key:"get_styles",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.styleElementId,c=_$("#".concat(b));return c.$$||(c=_$new("style").attr({type:"text/css",id:"".concat(b)})),c}},{key:"add_keyframes",value:function(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.styleElementId,e=a.get_styles(d);return e.appendParent(document.head).html+=a.gen_frames(b,c),e}},{key:"add_style",value:function(b,c,d){var e=a.get_styles(d);return e.appendParent(document.head).html+="".concat(b," {").concat(c,"}"),e}}]),a}();_defineProperty(Aq,"styleElementId","abquery-stylesheet");var _$new=function(a,b){return new Aq({el:a,num:b})},$el=function(a){return new Aq({el:a})},_$=function(a,b){return new Aq({query:a,parent:b})};window.$new=_$new,window.$el=$el,window.$=_$,window.Aq=Aq,Aq.init_style_defaults();
